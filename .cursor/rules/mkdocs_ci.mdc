---
description: MkDocs build and CI/CD practices
globs:
  - "site/**"
  - ".github/workflows/**"
  - "site/mkdocs.yml"
  - "site/requirements.txt" 
  - "site/hooks.py"
alwaysApply: false
---

# MkDocs Build
- Use `cd site && mkdocs build --strict` to fail on warnings in CI
- Dependencies go in site/requirements.txt, not inline in CI  
- Don't remove existing plugins or functionality without approval
- Focus on content quality and structure, not just technical implementation

# CI/CD Guidelines  
- Keep CI minimal and deterministic
- Don't add new jobs unless explicitly asked
- Don't modify triggers (on:) beyond push to main and PR unless asked
- Pin action versions (use @<commit SHA> or @vX, not @master)
- If deploying to Pages, use actions/deploy-pages or peaceiris/actions-gh-pages
- Don't introduce or touch secrets. Never echo secrets
- Prefer Python setup + pip cache, then `cd site && mkdocs build --strict`

# File Priority Context
- Focus on core site structure first: site/mkdocs.yml, site/docs/index.md
- Then content: docs/**/*.md, examples/**/*.ipynb  
- Config files: site/requirements.txt, site/hooks.py
- CI comes last: .github/workflows/*.yml

# Sample CI Workflow Structure
- Name: CI/CD
- Triggers: push to main, PRs
- Jobs: test (Python matrix), lint (ruff/mypy/black), docs (cd site && mkdocs build --strict), security (pip-audit)
- Deploy: only on main push, use actions/deploy-pages@v4