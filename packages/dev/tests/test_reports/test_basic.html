<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Machine Learning Model Audit Report</title>

    <style>
        /* Professional styling for regulatory audit reports */

        /* Root variables for consistent theming */
        :root {
            --primary-color: #2E3440;
            --secondary-color: #5E81AC;
            --accent-color: #88C0D0;
            --success-color: #A3BE8C;
            --warning-color: #EBCB8B;
            --error-color: #BF616A;
            --neutral-color: #D8DEE9;
            --background-color: #ECEFF4;
            --text-color: #2E3440;
            --light-gray: #F5F6F8;
            --border-color: #E1E3E6;
        }

        /* Base styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, 'Roboto', 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: white;
            font-size: 11pt;
        }

        /* Print-specific styles */
        @media print {
            body {
                font-size: 10pt;
                line-height: 1.4;
            }

            .page-break {
                page-break-before: always;
            }

            .no-print {
                display: none !important;
            }

            .section {
                break-inside: avoid;
            }

            h1, h2, h3 {
                break-after: avoid;
            }

            table {
                break-inside: avoid;
            }
        }

        /* Layout containers */
        .container {
            max-width: 8.5in;
            margin: 0 auto;
            padding: 0.5in;
            background: white;
        }

        .header {
            text-align: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 3px solid var(--primary-color);
        }

        .footer {
            text-align: center;
            margin-top: 2rem;
            padding-top: 1rem;
            border-top: 1px solid var(--border-color);
            font-size: 9pt;
            color: #666;
        }

        /* Typography */
        h1 {
            font-size: 24pt;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 0.5rem;
        }

        h2 {
            font-size: 16pt;
            font-weight: 600;
            color: var(--primary-color);
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            padding-bottom: 0.25rem;
            border-bottom: 2px solid var(--secondary-color);
        }

        h3 {
            font-size: 13pt;
            font-weight: 600;
            color: var(--text-color);
            margin-top: 1rem;
            margin-bottom: 0.5rem;
        }

        h4 {
            font-size: 11pt;
            font-weight: 600;
            color: var(--text-color);
            margin-top: 0.75rem;
            margin-bottom: 0.25rem;
        }

        /* Sections and content */
        .section {
            margin-bottom: 2rem;
            padding: 1rem;
            border-radius: 8px;
            background-color: var(--light-gray);
            border: 1px solid var(--border-color);
        }

        .executive-summary {
            background-color: #f8f9ff;
            border-left: 4px solid var(--secondary-color);
        }

        .warning-section {
            background-color: #fff8e6;
            border-left: 4px solid var(--warning-color);
        }

        .error-section {
            background-color: #ffebee;
            border-left: 4px solid var(--error-color);
        }

        /* Tables */
        .table-container {
            margin: 1rem 0;
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 0.5rem 0;
            background: white;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        th, td {
            padding: 0.5rem;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        th {
            background-color: var(--primary-color);
            color: white;
            font-weight: 600;
            font-size: 10pt;
        }

        td {
            font-size: 10pt;
        }

        tr:nth-child(even) {
            background-color: #f9f9f9;
        }

        tr:hover {
            background-color: #f0f8ff;
        }

        /* Metric values styling */
        .metric-value {
            font-weight: 600;
            font-size: 11pt;
        }

        .metric-good {
            color: var(--success-color);
        }

        .metric-warning {
            color: var(--warning-color);
        }

        .metric-poor {
            color: var(--error-color);
        }

        /* Status indicators */
        .status-indicator {
            display: inline-block;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 9pt;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status-pass {
            background-color: var(--success-color);
            color: white;
        }

        .status-fail {
            background-color: var(--error-color);
            color: white;
        }

        .status-warning {
            background-color: var(--warning-color);
            color: var(--text-color);
        }

        /* Plot containers */
        .plot-container {
            margin: 1rem 0;
            text-align: center;
            page-break-inside: avoid;
        }

        .plot-container img {
            max-width: 100%;
            height: auto;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .plot-caption {
            font-size: 9pt;
            color: #666;
            margin-top: 0.5rem;
            font-style: italic;
        }

        /* Key-value pairs */
        .info-grid {
            display: grid;
            grid-template-columns: auto 1fr;
            gap: 0.5rem;
            margin: 1rem 0;
        }

        .info-label {
            font-weight: 600;
            color: var(--text-color);
        }

        .info-value {
            color: var(--text-color);
        }

        /* Lists */
        ul, ol {
            margin: 0.5rem 0;
            padding-left: 1.5rem;
        }

        li {
            margin-bottom: 0.25rem;
        }

        /* Code and monospace */
        code, .monospace {
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 9pt;
            background-color: #f5f5f5;
            padding: 0.125rem 0.25rem;
            border-radius: 3px;
            border: 1px solid #ddd;
        }

        pre {
            background-color: #f8f8f8;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 1rem;
            overflow-x: auto;
            font-size: 9pt;
            line-height: 1.4;
        }

        /* Callout boxes */
        .callout {
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 6px;
            border: 1px solid var(--border-color);
        }

        .callout-info {
            background-color: #e3f2fd;
            border-left: 4px solid #2196f3;
        }

        .callout-success {
            background-color: #e8f5e8;
            border-left: 4px solid var(--success-color);
        }

        .callout-warning {
            background-color: #fff3cd;
            border-left: 4px solid var(--warning-color);
        }

        .callout-danger {
            background-color: #f8d7da;
            border-left: 4px solid var(--error-color);
        }

        /* Two-column layout */
        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin: 1rem 0;
        }

        @media print {
            .two-column {
                grid-template-columns: 1fr;
            }
        }

        /* Badges and tags */
        .badge {
            display: inline-block;
            padding: 0.125rem 0.375rem;
            font-size: 8pt;
            font-weight: 600;
            border-radius: 3px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .badge-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .badge-success {
            background-color: var(--success-color);
            color: white;
        }

        .badge-warning {
            background-color: var(--warning-color);
            color: var(--text-color);
        }

        .badge-danger {
            background-color: var(--error-color);
            color: white;
        }

        /* Utility classes */
        .text-center { text-align: center; }
        .text-right { text-align: right; }
        .text-muted { color: #666; }
        .text-small { font-size: 9pt; }
        .font-bold { font-weight: 600; }
        .mb-1 { margin-bottom: 0.5rem; }
        .mb-2 { margin-bottom: 1rem; }
        .mt-1 { margin-top: 0.5rem; }
        .mt-2 { margin-top: 1rem; }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header Section -->
        <header class="header">
            <h1>Machine Learning Model Audit Report</h1>
            <div class="text-muted">
                <strong>Generated:</strong> 2025-09-24 17:34:41 UTC<br>
                <strong>Audit ID:</strong> <code>None</code><br>
                <strong>Profile:</strong> <span class="badge badge-primary">tabular_compliance</span>
            </div>
        </header>

        <!-- Executive Summary -->
        <section class="section executive-summary">
            <h2>Executive Summary</h2>

            <div class="two-column">
                <div>
                    <h4>Model Overview</h4>
                    <div class="info-grid">
                        <span class="info-label">Model Type:</span>
                        <span class="info-value">Xgboost</span>

                        <span class="info-label">Dataset:</span>
                        <span class="info-value">
                            1000 samples,
                            23 features
                        </span>

                        <span class="info-label">Target:</span>
                        <span class="info-value">credit_risk</span>

                        <span class="info-label">Protected Attributes:</span>
                        <span class="info-value">
                                gender
                        </span>
                    </div>
                </div>

                <div>
                    <h4>Key Findings</h4>
                    <ul>
                        <li><strong>Overall Accuracy:</strong>
                            <span class="metric-value metric-good">
                                92.7%
                            </span>
                        </li>


                        <li><strong>Bias Detection:</strong>
                                <span class="status-indicator status-pass">No Issues Detected</span>
                        </li>

                        <li><strong>Explainability:</strong>
                                <span class="status-indicator status-fail">Not Available</span>
                        </li>

                        <li><strong>Reproducibility:</strong>
                                <span class="status-indicator status-pass">Fully Reproducible</span>
                        </li>
                    </ul>
                </div>
            </div>

        </section>

        <div class="page-break"></div>

        <!-- Data Overview -->
        <section class="section">
            <h2>Data Overview</h2>

            <h3>Dataset Statistics</h3>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Metric</th>
                            <th>Value</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Total Samples</strong></td>
                            <td class="metric-value">1,000</td>
                            <td>Number of observations in the dataset</td>
                        </tr>
                        <tr>
                            <td><strong>Total Features</strong></td>
                            <td class="metric-value">23</td>
                            <td>Number of input variables</td>
                        </tr>
                        <tr>
                            <td><strong>Missing Values</strong></td>
                            <td class="metric-value">0</td>
                            <td>Count of missing data points</td>
                        </tr>
                        <tr>
                            <td><strong>Data Quality Score</strong></td>
                            <td class="metric-value metric-good">
                                100.0%
                            </td>
                            <td>Percentage of complete data points</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h3>Feature Schema</h3>
            <div class="two-column">
                <div>
                    <h4>Categorical Features</h4>
                    <ul class="text-small">
                            <li class="text-muted">None specified</li>
                    </ul>
                </div>
                <div>
                    <h4>Numerical Features</h4>
                    <ul class="text-small">
                            <li class="text-muted">None specified</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Model Performance -->
        <section class="section">
            <h2>Model Performance Analysis</h2>

            <h3>Performance Metrics</h3>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Metric</th>
                            <th>Value</th>
                            <th>Assessment</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                                <tr>
                                    <td><strong>Accuracy</strong></td>
                                    <td class="metric-value">0.927</td>
                                    <td>
                                        <span class="status-indicator status-pass">
                                            Good
                                        </span>
                                    </td>
                                    <td>Overall classification accuracy across all classes</td>
                                </tr>
                                <tr>
                                    <td><strong>Overall Accuracy</strong></td>
                                    <td class="metric-value">0.927</td>
                                    <td>
                                        <span class="status-indicator status-pass">
                                            Excellent
                                        </span>
                                    </td>
                                    <td>Overall classification accuracy</td>
                                </tr>
                                <tr>
                                    <td><strong>Macro Precision</strong></td>
                                    <td class="metric-value">0.937</td>
                                    <td>
                                        <span class="status-indicator status-pass">
                                            Good
                                        </span>
                                    </td>
                                    <td>Average precision across all classes</td>
                                </tr>
                    </tbody>
                </table>
            </div>

            <!-- Performance Plots -->
        </section>

        <div class="page-break"></div>

        <!-- SHAP Explanations -->
        <section class="section">
            <h2>Model Explainability (SHAP Analysis)</h2>


            <!-- SHAP Plots -->

            <div class="callout callout-info">
                <h4>💡 Understanding SHAP Values</h4>
                <p>SHAP (SHapley Additive exPlanations) values explain individual predictions by quantifying the contribution of each feature:</p>
                <ul>
                    <li><strong>Positive values</strong> push the prediction toward the positive class</li>
                    <li><strong>Negative values</strong> push the prediction toward the negative class</li>
                    <li><strong>Magnitude</strong> indicates the strength of the feature's influence</li>
                    <li><strong>Sum of all SHAP values</strong> equals the difference from the baseline prediction</li>
                </ul>
            </div>
        </section>

        <div class="page-break"></div>

        <!-- Fairness Analysis -->

        <div class="page-break"></div>

        <!-- Audit Trail & Reproducibility -->
        <section class="section">
            <h2>Audit Trail & Reproducibility</h2>

            <h3>Execution Information</h3>
            <div class="info-grid">
                <span class="info-label">Audit ID:</span>
                <span class="info-value"><code>audit_20250924_173440_65c8046a</code></span>

                <span class="info-label">Creation Time:</span>
                <span class="info-value">2025-09-24 17:34:40.839594+00:00</span>

                <span class="info-label">Duration:</span>
                <span class="info-value">
                    0.30 seconds
                </span>

                <span class="info-label">Status:</span>
                <span class="info-value">
                    <span class="status-indicator status-pass">
                        Completed
                    </span>
                </span>
            </div>

            <h3>Reproducibility Information</h3>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Component</th>
                            <th>Seed Value</th>
                            <th>Purpose</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Master Seed</strong></td>
                            <td><code>42</code></td>
                            <td>Global randomness control</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h3>Selected Components</h3>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Component Type</th>
                            <th>Selected Implementation</th>
                            <th>Version</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Model</strong></td>
                            <td>Xgboost</td>
                            <td><code>1.0.0</code></td>
                        </tr>
                        <tr>
                            <td><strong>Explainer</strong></td>
                            <td>Treeshap</td>
                            <td><code>1.0.0</code></td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h3>Environment Information</h3>
            <div class="info-grid">
                <span class="info-label">Python Version:</span>
                <span class="info-value"><code>3.13.7</code></span>

                <span class="info-label">Platform:</span>
                <span class="info-value">macOS-26.0-arm64-arm-64bit-Mach-O</span>

                <span class="info-label">Hostname:</span>
                <span class="info-value">Gabriels-MacBook-Pro.local</span>

                <span class="info-label">Working Directory:</span>
                <span class="info-value"><code>/Users/gabe/Sites/glassalpha/packages</code></span>
            </div>

            <h3>Version Control</h3>
            <div class="info-grid">
                <span class="info-label">Git Commit:</span>
                <span class="info-value"><code>6b0d10ddbbae</code></span>

                <span class="info-label">Branch:</span>
                <span class="info-value">main</span>

                <span class="info-label">Working Directory Status:</span>
                <span class="info-value">
                    <span class="status-indicator status-warning">
                        Modified
                    </span>
                </span>
            </div>

            <div class="callout callout-success">
                <h4>🔒 Reproducibility Guarantee</h4>
                <p>This audit is fully reproducible. Running the same configuration with identical data and environment will produce byte-identical results.</p>
                <p><strong>Configuration Hash:</strong> <code>dffbdbd5ab581da5...</code></p>
            </div>
        </section>

        <div class="page-break"></div>

        <!-- Regulatory Compliance -->
        <section class="section">
            <h2>Regulatory Compliance Assessment</h2>

            <h3>Compliance Checklist</h3>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Requirement</th>
                            <th>Status</th>
                            <th>Evidence</th>
                            <th>Notes</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Model Documentation</strong></td>
                            <td><span class="status-indicator status-pass">Complete</span></td>
                            <td>Full audit report generated</td>
                            <td>Comprehensive model documentation provided</td>
                        </tr>
                        <tr>
                            <td><strong>Performance Validation</strong></td>
                            <td><span class="status-indicator status-pass">Complete</span></td>
                            <td>Performance metrics computed</td>
                            <td>Model performance assessed across standard metrics</td>
                        </tr>
                        <tr>
                            <td><strong>Bias Testing</strong></td>
                            <td><span class="status-indicator status-fail">Missing</span></td>
                            <td>No bias testing</td>
                            <td>Bias testing required for protected attributes</td>
                        </tr>
                        <tr>
                            <td><strong>Explainability</strong></td>
                            <td><span class="status-indicator status-pass">Complete</span></td>
                            <td>SHAP explanations provided</td>
                            <td>Model decisions can be explained to stakeholders</td>
                        </tr>
                        <tr>
                            <td><strong>Reproducibility</strong></td>
                            <td><span class="status-indicator status-pass">Complete</span></td>
                            <td>Full audit trail with seeds</td>
                            <td>Results can be exactly reproduced</td>
                        </tr>
                        <tr>
                            <td><strong>Data Governance</strong></td>
                            <td><span class="status-indicator status-pass">Complete</span></td>
                            <td>Data schema documented</td>
                            <td>Data sources and processing documented</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h3>Regulatory Framework Assessment</h3>
            <div class="two-column">
                <div>
                    <h4>GDPR Compliance (EU)</h4>
                    <ul class="text-small">
                        <li>✅ Right to explanation supported (SHAP analysis)</li>
                        <li>✅ Automated decision-making documented</li>
                        <li>❌ Bias assessment performed</li>
                        <li>✅ Sensitive data handling documented</li>
                    </ul>
                </div>
                <div>
                    <h4>Equal Credit Opportunity Act (US)</h4>
                    <ul class="text-small">
                        <li>❌ Disparate impact testing</li>
                        <li>✅ Adverse action explanations available</li>
                        <li>✅ Protected class monitoring</li>
                        <li>✅ Model performance documentation</li>
                    </ul>
                </div>
            </div>


            <div class="callout callout-danger">
                <h4>🚨 Compliance Issues Detected</h4>
                <p>The following issues must be addressed before regulatory submission:</p>
                <ul>
                    <li>Bias testing required</li>
                </ul>
            </div>
        </section>

        <!-- Footer -->
        <footer class="footer">
            <hr>
            <div class="text-center text-small">
                <p>
                    <strong>Machine Learning Model Audit Report</strong> |
                    Generated by GlassAlpha v1.0.0 |
                    2025-09-24 17:34:41 UTC
                </p>
                <p class="text-muted">
                    This report was generated using automated audit tools. Human review is recommended for regulatory submissions.
                    <br>
                    For questions about this audit, contact: audit-support@example.com
                </p>
            </div>
        </footer>
    </div>
</body>
</html>
